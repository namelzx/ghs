(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19a91014"],{"94fc":function(e,t,i){},"980c":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),e._v(" "),i("span",[e._v("筛选搜索")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        查询搜索\n      ")]),e._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        重置\n      ")])],1),e._v(" "),i("div",{staticClass:"search",staticStyle:{"margin-top":"15px"}},[i("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"80px"}},[i("el-form-item",{attrs:{label:"输入搜索："}},[i("el-input",{staticClass:"input-width",attrs:{size:"mini",placeholder:"订单编号"},model:{value:e.listQuery.out_trade_no,callback:function(t){e.$set(e.listQuery,"out_trade_no",t)},expression:"listQuery.out_trade_no"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"评价昵称："}},[i("el-input",{staticClass:"input-width",attrs:{placeholder:"用户昵称"},model:{value:e.listQuery.nickName,callback:function(t){e.$set(e.listQuery,"nickName",t)},expression:"listQuery.nickName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"评价内容："}},[i("el-input",{staticClass:"input-width",attrs:{placeholder:"评价内容"},model:{value:e.listQuery.desc,callback:function(t){e.$set(e.listQuery,"desc",t)},expression:"listQuery.desc"}})],1)],1)],1)]),e._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("数据列表")])]),e._v(" "),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"orderTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"编号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"评价内容",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.order?[e._v(e._s(t.row.desc))]:void 0}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"订单编号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.order?[e._v(e._s(t.row.order.out_trade_no))]:void 0}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"评价时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.create_time))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"用户账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.user?[e._v(e._s(t.row.user.nickName))]:void 0}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.handleDeleteOrder(t.$index,t.row)}}},[e._v("删除评价")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"batch-operate-container"},[i("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:e.operateType,callback:function(t){e.operateType=t},expression:"operateType"}},e._l(e.operateOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),i("el-button",{staticClass:"search-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleBatchOperate()}}},[e._v("\n      确定\n    ")])],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","current-page":e.listQuery.page,"page-size":e.listQuery.limit,"page-sizes":[5,10,15],total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},a=[],r=i("b775");function n(e){return Object(r["a"])({url:"admin/Evaluate/GetDataByList",method:"get",params:e})}function s(e){return Object(r["a"])({url:"admin/Evaluate/GetIdByDelete",method:"post",data:e})}var o={page:1,limit:10},c={name:"orderList",components:{},data:function(){return{listQuery:Object.assign({},o),listLoading:!0,list:null,total:null,operateType:null,multipleSelection:[],closeOrder:{dialogVisible:!1,content:null,orderIds:[]},statusOptions:[{label:"待付款",value:0},{label:"待发货",value:1},{label:"已发货",value:2},{label:"已完成",value:3},{label:"已关闭",value:4}],orderTypeOptions:[{label:"正常订单",value:0},{label:"秒杀订单",value:1}],sourceTypeOptions:[{label:"PC订单",value:0},{label:"APP订单",value:1}],operateOptions:[{label:"批量发货",value:1},{label:"关闭订单",value:2},{label:"删除订单",value:3}],logisticsDialogVisible:!1}},created:function(){this.getList()},filters:{formatCreateTime:function(e){var t=new Date(e);return formatDate(t,"yyyy-MM-dd hh:mm:ss")},formatPayType:function(e){return 1===e?"支付宝":2===e?"微信":"未支付"},formatSourceType:function(e){return 1===e?"APP订单":"PC订单"},formatStatus:function(e){return 1===e?"待发货":2===e?"已发货":3===e?"已完成":4===e?"已关闭":5===e?"无效订单":"待付款"}},methods:{handleResetSearch:function(){this.listQuery=Object.assign({},o)},handleSearchList:function(){this.listQuery.page=1,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handleViewOrder:function(e,t){this.$router.push({path:"/oms/orderDetail",query:{id:t.id}})},handleCloseOrder:function(e,t){this.closeOrder.dialogVisible=!0,this.closeOrder.orderIds=[t.id]},handleDeliveryOrder:function(e,t){var i=this.covertOrder(t);this.$router.push({path:"/oms/deliverOrderList",query:{list:[i]}})},handleViewLogistics:function(e,t){this.logisticsDialogVisible=!0},handleDeleteOrder:function(e,t){var i=[];i.push(t.id),this.deleteOrder(i)},handleBatchOperate:function(){if(null==this.multipleSelection||this.multipleSelection.length<1)this.$message({message:"请选择要操作的订单",type:"warning",duration:1e3});else if(1===this.operateType){for(var e=[],t=0;t<this.multipleSelection.length;t++)1===this.multipleSelection[t].status&&e.push(this.covertOrder(this.multipleSelection[t]));if(0===e.length)return void this.$message({message:"选中订单中没有可以发货的订单",type:"warning",duration:1e3});this.$router.push({path:"/oms/deliverOrderList",query:{list:e}})}else if(2===this.operateType){this.closeOrder.orderIds=[];for(var i=0;i<this.multipleSelection.length;i++)this.closeOrder.orderIds.push(this.multipleSelection[i].id);this.closeOrder.dialogVisible=!0}else if(3===this.operateType){for(var l=[],a=0;a<this.multipleSelection.length;a++)l.push(this.multipleSelection[a].id);this.deleteOrder(l)}},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCloseOrderConfirm:function(){var e=this;if(null!=this.closeOrder.content&&""!==this.closeOrder.content){var t=new URLSearchParams;t.append("ids",this.closeOrder.orderIds),t.append("note",this.closeOrder.content),(void 0)(t).then((function(t){e.closeOrder.orderIds=[],e.closeOrder.dialogVisible=!1,e.getList(),e.$message({message:"修改成功",type:"success",duration:1e3})}))}else this.$message({message:"操作备注不能为空",type:"warning",duration:1e3})},getList:function(){var e=this;this.listLoading=!0,n(this.listQuery).then((function(t){e.listLoading=!1,e.list=t.data.data,console.log(e.list),e.total=t.data.total}))},deleteOrder:function(e){var t=this;this.$confirm("是否要进行该删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=new URLSearchParams;i.append("id",e),s(i).then((function(e){t.$message({message:"删除成功！",type:"success",duration:1e3}),t.getList()}))}))},covertOrder:function(e){var t=e.receiverProvince+e.receiverCity+e.receiverRegion+e.receiverDetailAddress,i={orderId:e.id,orderSn:e.orderSn,receiverName:e.receiverName,receiverPhone:e.receiverPhone,receiverPostCode:e.receiverPostCode,address:t,deliveryCompany:null,deliverySn:null};return i}}},u=c,d=(i("ff94"),i("2877")),h=Object(d["a"])(u,l,a,!1,null,"4141fef9",null);t["default"]=h.exports},ff94:function(e,t,i){"use strict";var l=i("94fc"),a=i.n(l);a.a}}]);