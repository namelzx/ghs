(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57333cb0"],{"468b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%",height:"50vh","overflow-y":"scroll"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"上级",prop:"pid"}},[a("el-cascader",{attrs:{options:t.getRulesList,props:t.props_pid,placeholder:"请选择","change-on-select":""},on:{change:t.handleChange},model:{value:t.pid,callback:function(e){t.pid=e},expression:"pid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标识",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sorts"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.sorts,callback:function(e){t.$set(t.temp,"sorts",e)},expression:"temp.sorts"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.icon,callback:function(e){t.$set(t.temp,"icon",e)},expression:"temp.icon"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路径",prop:"path"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.path,callback:function(e){t.$set(t.temp,"path",e)},expression:"temp.path"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组件",prop:"component"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.component,callback:function(e){t.$set(t.temp,"component",e)},expression:"temp.component"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转",prop:"redirect"}},[a("el-input",{attrs:{clearable:""},model:{value:t.temp.redirect,callback:function(e){t.$set(t.temp,"redirect",e)},expression:"temp.redirect"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}},[a("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"隐藏"}},[a("el-radio-group",{model:{value:t.temp.hidden,callback:function(e){t.$set(t.temp,"hidden",e)},expression:"temp.hidden"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"缓存"}},[a("el-radio-group",{model:{value:t.temp.noCache,callback:function(e){t.$set(t.temp,"noCache",e)},expression:"temp.noCache"}},[a("el-radio",{attrs:{label:0}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"展示"}},[a("el-radio-group",{model:{value:t.temp.alwaysShow,callback:function(e){t.$set(t.temp,"alwaysShow",e)},expression:"temp.alwaysShow"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){return t.saveData()}}},[t._v("保存")])],1)],1)},r=[],n=(a("7f7f"),a("bd43")),l=a("f382"),o={name:"RulesForm",components:{},props:{ruleList:{type:Array,default:[]}},data:function(){return{btnLoading:!1,ruleTop:[{id:0,title:"顶级"}],pid:[],props_pid:{label:"title",value:"id"},temp:{id:0,pid:0,title:"",name:"",status:1,icon:"",path:"",sorts:99,component:"layout",hidden:0,noCache:1,alwaysShow:1,redirect:"noredirect"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{title:[{required:!0,message:"名称必填",trigger:"blur"}],name:[{required:!0,message:"标识必填",trigger:"blur"}],sorts:[{required:!0,message:"排序必填",trigger:"blur"}],icon:[{required:!0,message:"图标必填",trigger:"blur"}],path:[{required:!0,message:"路径必填",trigger:"blur"}],component:[{required:!0,message:"组件必填",trigger:"blur"}]}}},computed:{getRulesList:function(){return this.ruleTop.concat(l["a"].listToTreeMulti(this.ruleList))}},watch:{dialogFormVisible:function(){this.resetTemp()},temp:{handler:function(t,e){},immediate:!0,deep:!0}},created:function(){},destroyed:function(){},methods:{resetTemp:function(){this.temp={id:0,pid:0,title:"",name:"",status:1,icon:"",path:"",component:"layout/Layout",hidden:0,noCache:1,sorts:99,alwaysShow:1,redirect:"noredirect"}},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.currentIndex=-1,this.pid=[],this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleUpdate:function(t){var e=this;this.dialogStatus="update",this.dialogFormVisible=!0;var a=this;Object(n["g"])(t).then((function(i){1===i.status&&(a.temp.id=i.data.id,a.temp.pid=i.data.pid,a.temp.title=i.data.title,a.temp.name=i.data.name,a.temp.status=i.data.status,a.temp.icon=i.data.icon,a.temp.path=i.data.path,a.temp.component=i.data.component,a.temp.hidden=i.data.hidden,a.temp.noCache=i.data.noCache,a.temp.alwaysShow=i.data.alwaysShow,a.temp.redirect=i.data.redirect,a.temp.sorts=i.data.sorts,a.pid=l["a"].getParentsId(e.ruleList,t))})),this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},saveData:function(){var t=this;this.btnLoading=!0,this.$refs["dataForm"].validate((function(e){if(e){var a=t,i=t.temp;Object(n["h"])(i).then((function(e){1===e.status?(i.id||(i.id2=e.data.id),t.$emit("updateRow",i),a.dialogFormVisible=!1,a.$message.success(e.msg)):a.$message.error(e.msg),a.btnLoading=!1})).catch((function(e){t.btnLoading=!1}))}else t.btnLoading=!1}))},handleChange:function(t){t.length&&(this.temp.pid=t[t.length-1])}}},s=o,d=a("2877"),u=Object(d["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},bd43:function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return n})),a.d(e,"g",(function(){return l})),a.d(e,"h",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"b",(function(){return c}));var i=a("b775");function r(t){return Object(i["a"])({url:"/admin/rules/index",method:"post",data:t})}function n(){return Object(i["a"])({url:"/admin/rules/getLists",method:"post"})}function l(t){return Object(i["a"])({url:"/admin/rules/getinfo",method:"get",params:{id:t}})}function o(t){return Object(i["a"])({url:"/admin/rules/save",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/admin/rules/del",method:"get",params:{id:t}})}function d(t,e,a){var r={val:t,field:e,value:a};return Object(i["a"])({url:"/admin/rules/change",method:"post",data:r})}function u(t){return Object(i["a"])({url:"/admin/rules/delall",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/admin/rules/changeall",method:"post",data:t})}},f382:function(t,e,a){"use strict";a("ac6a");var i=a("ed08");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=[];return t&&t.forEach((function(d){if(d[n]===e){null!==o&&(d=Object(i["e"])(d,o));var u=r(t,d[a],a,n,l,o);u.length&&(d[l]=u),s.push(d)}})),s}function n(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",r=[];return t&&t.forEach((function(l){if(l[a]===e){r.unshift(l[i]);var o=n(t,l[i],a,i);o.length&&(r=r.concat(o))}})),r}function l(t,e,a,r){return t&&t.map((function(t){t[e]===a?Object(i["e"])(t,r):l(t.children,e,a,r)})),t}var o={listToTreeMulti:r,getParentsId:n,upadteArr:l};e["a"]=o}}]);