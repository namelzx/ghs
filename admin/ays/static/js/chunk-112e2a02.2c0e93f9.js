(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-112e2a02","chunk-4857e055"],{1927:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"createPost-container"},[i("el-dialog",{attrs:{title:"选择城市",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-tree",{ref:"tree",attrs:{data:t.city,"show-checkbox":"","node-key":"value","default-checked-keys":t.itemdata.city,props:t.defaultProps},on:{"check-change":t.handleCheckChange}}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handelCityconfirm()}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm}},[i("div",{staticClass:"createPost-main-container"},[i("div",{staticClass:"main-bg"},[i("divider",{attrs:{title:"基本信息"}}),t._v(" "),i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{"label-width":"100px",label:"模版名称:"}},[i("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入商品名称"},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1)],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"main-bg"},[i("divider",{attrs:{title:"配送区域及运费"}}),t._v(" "),t.list.length<1?i("el-button",{on:{click:function(e){return t.handelAdd()}}},[t._v("添加")]):t._e(),t._v(" "),i("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"highlight-current-row":""}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{label:"可送区域","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("a",{attrs:{type:"primary"},on:{click:function(e){return t.handelCity(n)}}},[t._v("管理城市")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"运费",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-input",{attrs:{placeholder:"请输入内容"},on:{change:t.handelinputconfirm},model:{value:n.price,callback:function(e){t.$set(n,"price",e)},expression:"row.price"}})]}}])})],1)],1)])]),t._v(" "),i("div",{staticClass:"footer"},[i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handelPost()}}},[t._v("保存")])],1)])],1)},a=[],r=(i("28a5"),i("21d2")),s=i("c591"),o=i("3a6f"),c={name:"edit",components:{Divider:o["default"]},filters:{statusFilter:function(t){var e={1:"",2:"info"};return e[t]}},data:function(){return{dialogVisible:!1,city:[],chedata:[],list:[],itemdata:{},postForm:{},loading:!1,defaultProps:{children:"children",label:"label"}}},computed:{displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}},created:function(){var t=this;Object(s["a"])().then((function(e){console.log(e),t.city=e.data})),console.log(this.$route.query.id);var e=this.$route.query.id;if(this.$route.query.id&&Object(r["f"])(e).then((function(e){t.postForm=e.data,t.list.push(e.data.city)})),this.isEdit){var i=this.$route.params&&this.$route.params.id;this.fetchData(i)}},methods:{handelAdd:function(){this.list.push({price:0,city:""})},handelPost:function(){var t=this;if(!this.list[0])return this.$message.error("最少选择一个配送区域"),!0;this.postForm.city_id=this.list[0].id,Object(r["g"])(this.postForm).then((function(t){console.log(t)})),Object(r["a"])(this.list[0]).then((function(e){t.$message.success("保存成功"),t.$router.go(-1)}))},handelCity:function(t){if(this.dialogVisible=!0,this.itemdata=t,t.city){console.log("不是空",t.city);for(var e=t.city.split(","),i=0;i<e.length;i++)e[i]=parseInt(e[i]);this.itemdata.city=e}else this.itemdata.city=[];this.itemdata=t},handelinputconfirm:function(t){console.log(t)},handelCityconfirm:function(){var t=this;console.log(this.$refs.tree.getCheckedKeys()),this.itemdata.city=this.$refs.tree.getCheckedKeys().join(","),Object(r["a"])(this.itemdata).then((function(e){t.list[0]=e.data,t.itemdata.city=[],t.dialogVisible=!1,t.$message.success("更新成功")}))},handleClose:function(){this.itemdata.city=[],this.dialogVisible=!1},getCheckedKeys:function(){this.chedata=this.$refs.tree.getCheckedKeys()},handleCheckChange:function(t){console.log(t)}}},l=c,u=(i("a6c1"),i("2877")),d=Object(u["a"])(l,n,a,!1,null,"159d6763",null);e["default"]=d.exports},"21d2":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"g",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return c})),i.d(e,"b",(function(){return l}));var n=i("b775");function a(t){return Object(n["a"])({url:"admin/Distribution/CourierCityByAdd",method:"post",data:t})}function r(t){return Object(n["a"])({url:"admin/Distribution/PostDataByCourier",method:"post",data:t})}function s(t){return Object(n["a"])({url:"admin/Distribution/GetDataByList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"admin/Distribution/GetIdByInfo",method:"get",params:{id:t}})}function c(t){return Object(n["a"])({url:"admin/Distribution/GetIdByDelete",method:"get",params:{id:t}})}function l(t){return Object(n["a"])({url:"admin/Distribution/GetCourierByAll",method:"get"})}},"3a6f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"divider"},[i("div",{staticClass:"b"},[t._v("  ")]),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.title))])])},a=[],r={name:"Divider",props:{title:String}},s=r,o=(i("f8cb"),i("2877")),c=Object(o["a"])(s,n,a,!1,null,"4fd900f1",null);e["default"]=c.exports},4351:function(t,e,i){},a200:function(t,e,i){},a6c1:function(t,e,i){"use strict";var n=i("a200"),a=i.n(n);a.a},c591:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return o}));var n=i("b775");function a(t){return Object(n["a"])({url:"admin/city/GetDataByList",method:"get",params:t})}function r(t){return Object(n["a"])({url:"admin/city/GetIdByDel",method:"get",params:{id:t}})}function s(t){return Object(n["a"])({url:"admin/city/PostDataBySave",method:"post",data:t})}function o(){return Object(n["a"])({url:"api/admin/City",method:"get"})}},f8cb:function(t,e,i){"use strict";var n=i("4351"),a=i.n(n);a.a}}]);