(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4056aac5"],{"28b8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%",height:"50vh","overflow-y":"scroll"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"角色",prop:"groupId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.groupId,callback:function(t){e.$set(e.temp,"groupId",t)},expression:"temp.groupId"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"userName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.temp.userName,callback:function(t){e.$set(e.temp,"userName",t)},expression:"temp.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{clearable:""},model:{value:e.temp.password,callback:function(t){e.$set(e.temp,"password",t)},expression:"temp.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"img"}}),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.temp.realName,callback:function(t){e.$set(e.temp,"realName",t)},expression:"temp.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机"}},[a("el-input",{attrs:{clearable:""},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{clearable:""},model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.temp.isEnabled,callback:function(t){e.$set(e.temp,"isEnabled",t)},expression:"temp.isEnabled"}},[a("el-radio",{attrs:{label:1}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){return e.saveData()}}},[e._v("保存")])],1)],1)},r=[],n=a("7618"),l=a("5d51"),o=a("50fc"),s=a("ed08"),d=a("61f7"),m=a("f121"),u={name:"AdminForm",data:function(){var e=function(e,t,a){if(!Object(d["validateEmail"])(t))return a(new Error);a()};return{btnLoading:!1,roles:{},temp:{id:0,groupId:"",userName:"",password:"",realName:"",isEnabled:1,phone:"",email:"",regTime:Object(s["d"])(),img:""},oss_url:"",config:{fileName:"img",limit:1,multiple:!0,accept:"image/*",action:m["a"].uploadUrl.img},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{groupId:[{required:!0,message:"角色必选",trigger:"change"}],userName:[{required:!0,message:"账号必填",trigger:"blur"}],email:[{validator:e,message:"邮箱格式错误",trigger:"blur"}]}}},watch:{dialogFormVisible:function(){this.resetTemp()},temp:{handler:function(e,t){},immediate:!0,deep:!0}},created:function(){this.getRoles()},destroyed:function(){},methods:{handelFile:function(e){var t=this;t.temp.img=e.file.url},getRoles:function(){var e=this;Object(l["a"])().then((function(t){e.roles=t.data}))},resetTemp:function(){this.temp={id:0,groupId:"",userName:"",password:"",realName:"",isEnabled:1,phone:"",email:"",regTime:Object(s["d"])(),img:""}},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.currentIndex=-1,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleUpdate:function(e){var t=this;this.oss_url=m["a"].oss_url,this.dialogStatus="update",this.dialogFormVisible=!0;var a=this;Object(o["f"])(e).then((function(e){1===e.status&&(a.temp.id=e.data.id,a.temp.groupId=e.data.groupId,a.temp.userName=e.data.userName,a.temp.realName=e.data.realName,a.temp.isEnabled=e.data.isEnabled,a.temp.phone=e.data.phone,a.temp.email=e.data.email,a.temp.password="",a.temp.img=e.data.img)})),this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},saveData:function(){var e=this;this.btnLoading=!0,console.log("更新"),this.$refs["dataForm"].validate((function(t){if(t){var a=e,i=e.temp;"object"===Object(n["a"])(i.img)&&(i.img=i.img.join(",")),Object(o["h"])(i).then((function(t){1===t.status?(i.id||(i.id=t.data.id),e.$emit("updateRow",i),a.dialogFormVisible=!1,a.$message.success(t.msg)):a.$message.error(t.msg),a.btnLoading=!1})).catch((function(t){e.btnLoading=!1}))}else e.btnLoading=!1}))}}},c=u,p=a("2877"),f=Object(p["a"])(c,i,r,!1,null,null,null);t["default"]=f.exports},"50fc":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return n})),a.d(t,"g",(function(){return l})),a.d(t,"h",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return u}));var i=a("b775");function r(e){return Object(i["a"])({url:"/admin/admin/index",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/admin/admin/getinfo",method:"get",params:{id:e}})}function l(e){return Object(i["a"])({url:"/admin/admin/modify",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/admin/admin/save",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/admin/admin/del",method:"get",params:{id:e}})}function d(e,t,a){var r={val:e,field:t,value:a};return Object(i["a"])({url:"/admin/admin/change",method:"post",data:r})}function m(e){return Object(i["a"])({url:"/admin/admin/delall",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/admin/admin/changeall",method:"post",data:e})}},"5d51":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return l}));var i=a("b775");function r(){return Object(i["a"])({url:"/admin/roles/getLists",method:"post"})}function n(e){return Object(i["a"])({url:"/admin/roles/getinfo",method:"get",params:{id:e}})}function l(e){return Object(i["a"])({url:"/admin/roles/save",method:"post",data:e})}}}]);