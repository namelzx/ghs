(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-916f3d38","chunk-bfa243d0"],{"277e":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("b775");function a(e){return Object(i["a"])({url:"admin/Permissions/index",method:"post",data:e})}function l(){return Object(i["a"])({url:"/admin/Permissions/getLists",method:"post"})}function s(e){return Object(i["a"])({url:"/admin/Permissions/getinfo",method:"get",params:{id:e}})}function r(e){return Object(i["a"])({url:"/admin/Permissions/save",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/admin/Permissions/del",method:"get",params:{id:e}})}function d(e,t,n){var a={val:e,field:t,value:n};return Object(i["a"])({url:"/admin/Permissions/change",method:"post",data:a})}function c(e){return Object(i["a"])({url:"/admin/Permissions/delall",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/admin/Permissions/changeall",method:"post",data:e})}},"50fc":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("b775");function a(e){return Object(i["a"])({url:"/admin/admin/index",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/admin/admin/getinfo",method:"get",params:{id:e}})}function s(e){return Object(i["a"])({url:"/admin/admin/modify",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/admin/admin/save",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/admin/admin/del",method:"get",params:{id:e}})}function d(e,t,n){var a={val:e,field:t,value:n};return Object(i["a"])({url:"/admin/admin/change",method:"post",data:a})}function c(e){return Object(i["a"])({url:"/admin/admin/delall",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/admin/admin/changeall",method:"post",data:e})}},"63fd":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"filter-container"},[n("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.listQuery}},[n("el-form-item",{attrs:{label:"姓名:"}},[n("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.listQuery.realName,callback:function(t){e.$set(e.listQuery,"realName",t)},expression:"listQuery.realName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号:"}},[n("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"岗位:"}},[n("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择"},model:{value:e.listQuery.groupId,callback:function(t){e.$set(e.listQuery,"groupId",t)},expression:"listQuery.groupId"}},e._l(e.roles,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleCreate}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleFilter}},[e._v("搜索")])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"ID",align:"center",width:"65",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"姓名","min-width":"100px",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"link-type",on:{click:function(n){return e.handleUpdate(t.$index,t.row.id)}}},[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"手机",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"岗位",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"el-icon-success text-green":1==t.row.isEnabled,"el-icon-error text-red":0==t.row.isEnabled},on:{click:function(n){return e.handleModifyStatus(t.$index,t.row.id,t.row.isEnabled)}}},[e._v(e._s(e._f("statusFilter")(t.row.isEnabled)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"登录IP",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.loginIp))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"登录时间",width:"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.loginTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"注册IP",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.regIp))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"注册时间",width:"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.regTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"180px","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.handleUpdate(t.$index,t.row.id)}}},[e._v("编辑")])],1),e._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{attrs:{size:"mini",loading:t.row.delete,type:"warning"},on:{click:function(n){return e.handleDelete(t.$index,t.row.id)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.psize,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),n("adminForm",{ref:"fromAdmin",on:{updateRow:e.updateRow}})],1)},a=[],l=(n("ac6a"),n("50fc")),s=n("6724"),r=n("ed08"),o=n("a5f9"),d=n("97cb"),c=n("277e"),u={name:"Admin",components:{adminForm:o["default"]},directives:{waves:s["a"]},filters:{statusFilter:function(e){var t={0:"禁用",1:"正常"};return t[e]}},data:function(){return{type_tab:0,tableKey:0,list:null,total:null,selectedRows:null,listLoading:!0,roles:[],showSearch:!1,listQuery:{page:1,psize:10,isEnabled:"-1",userName:"",phone:"",realName:"",startTime:"",endTime:""},buttonDisabled:!0,deleting:!1,dateTime:"",pickerOptions:r["h"],currentIndex:-1}},watch:{dateTime:function(e){this.listQuery.startTime=e[0],this.listQuery.endTime=e[1]}},created:function(){this.fetchList(),this.getRoles()},methods:{getRoles:function(){var e=this;Object(c["f"])().then((function(t){e.roles=t.data}))},fetchList:function(){var e=this;this.listLoading=!0,Object(l["e"])(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.fetchList()},handleFilterClear:function(){this.listQuery={page:1,psize:10,isEnabled:"-1",userName:"",phone:"",realName:"",startTime:"",endTime:""},this.dateTime="",this.fetchList()},handleSizeChange:function(e){this.listQuery.psize=e,this.fetchList()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchList()},handleModifyStatus:function(e,t,n){this.list[e]["isEnabled"]=1-n,Object(l["a"])(t,"isEnabled",1-n).then((function(e){}))},handleSelectionChange:function(e){e.length>0?this.buttonDisabled=!1:this.buttonDisabled=!0,this.selectedRows=e},handleImg:function(e){Object(d["a"])(e,"图片预览","500","400")},handleCreate:function(){this.$refs.fromAdmin.handleCreate()},handleUpdate:function(e,t){this.currentIndex=e,this.$refs.fromAdmin.handleUpdate(t)},updateRow:function(e){this.currentIndex>=0&&e.id>0?this.list.splice(this.currentIndex,1,e):(this.list.length>=10&&this.list.pop(),this.list.unshift(e),this.total=this.total+1),this.fetchList(),this.currentIndex=-1},handleDelete:function(e,t){var n=this,i=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$set(i.list[e],"delete",!0),Object(l["c"])(t).then((function(t){1===t.status?(i.list.splice(e,1),i.total=i.total-1,i.$notify.success(t.msg)):i.$notify.error(t.msg),i.$set(i.list[e],"delete",!1)})).catch((function(t){i.$set(i.list[e],"delete",!1)}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleDeleteAll:function(){var e=this,t=this;this.selectedRows.length>0?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleting=!0;var e=Object(r["c"])(t.selectedRows,"id"),n=e.join(",");Object(l["d"])({ids:n}).then((function(n){if(1===n.status){var i=[];t.list.forEach((function(t,n,a){e.indexOf(t.id)>-1&&i.push(n)}));for(var a=i.length-1;a>=0;a--)t.list.splice(i[a],1);t.total=t.total-i.length,t.$message.success(n.msg)}else t.$message.error(n.msg);t.deleting=!1})).catch((function(e){t.deleting=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):t.$message.error("请选择要删除的数据")},handleCommand:function(e){var t=this;if(this.selectedRows.length>0){var n=Object(r["c"])(this.selectedRows,"id"),i=n.join(",");Object(l["b"])({val:i,field:"isEnabled",value:e}).then((function(i){1===i.status?(t.list.forEach((function(i,a,l){n.indexOf(i.id)>-1&&(t.list[a]["isEnabled"]=e)})),t.$message.success(i.msg)):t.$message.error(i.msg)})).catch((function(e){}))}else t.$message.error("请选择要操作的数据")}}},m=u,f=(n("9d24"),n("2877")),p=Object(f["a"])(m,i,a,!1,null,null,null);t["default"]=p.exports},6724:function(e,t,n){"use strict";n("8d41");var i="@@wavesContext";function a(e,t){function n(n){var i=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),l=a.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var s=l.getBoundingClientRect(),r=l.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(s.width,s.height)+"px",l.appendChild(r)),a.type){case"center":r.style.top=s.height/2-r.offsetHeight/2+"px",r.style.left=s.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(n.pageY-s.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(n.pageX-s.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=a.color,r.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=n:e[i]={removeHandle:n},n}var l={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},s=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(s)),l.install=s;t["a"]=l},"89fd":function(e,t,n){},"8d41":function(e,t,n){},"97cb":function(e,t,n){"use strict";function i(e,t,n,i){var a=void 0!==window.screenLeft?window.screenLeft:screen.left,l=void 0!==window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=s/2-n/2+a,d=r/2-i/2+l,c=window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+n+", height="+i+", top="+d+", left="+o);window.focus&&c.focus()}n.d(t,"a",(function(){return i}))},"9d24":function(e,t,n){"use strict";var i=n("89fd"),a=n.n(i);a.a},a5f9:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"100%",height:"50vh","overflow-y":"scroll"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"70px"}},[n("el-form-item",{attrs:{label:"岗位",prop:"groupId"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.groupId,callback:function(t){e.$set(e.temp,"groupId",t)},expression:"temp.groupId"}},e._l(e.roles,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"账号",prop:"userName"}},[n("el-input",{attrs:{clearable:""},model:{value:e.temp.userName,callback:function(t){e.$set(e.temp,"userName",t)},expression:"temp.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{clearable:""},model:{value:e.temp.password,callback:function(t){e.$set(e.temp,"password",t)},expression:"temp.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"img"}},[n("Upload",{attrs:{imageUrl:e.temp.img},on:{HandelFile:e.handelFile}})],1),e._v(" "),n("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[n("el-input",{attrs:{clearable:""},model:{value:e.temp.realName,callback:function(t){e.$set(e.temp,"realName",t)},expression:"temp.realName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{attrs:{clearable:""},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{attrs:{clearable:""},model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-radio-group",{model:{value:e.temp.isEnabled,callback:function(t){e.$set(e.temp,"isEnabled",t)},expression:"temp.isEnabled"}},[n("el-radio",{attrs:{label:1}},[e._v("正常")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){return e.saveData()}}},[e._v("保存")])],1)],1)},a=[],l=n("7618"),s=n("39c5"),r=n("277e"),o=n("50fc"),d=n("ed08"),c=n("61f7"),u=n("f121"),m={name:"AdminForm",components:{Upload:s["a"]},data:function(){var e=function(e,t,n){if(!Object(c["validateEmail"])(t))return n(new Error);n()};return{btnLoading:!1,roles:{},temp:{id:0,groupId:"",userName:"",password:"",realName:"",isEnabled:1,phone:"",email:"",regTime:Object(d["d"])(),img:""},oss_url:"",config:{fileName:"img",limit:1,multiple:!0,accept:"image/*",action:u["a"].uploadUrl.img},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{groupId:[{required:!0,message:"角色必选",trigger:"change"}],userName:[{required:!0,message:"账号必填",trigger:"blur"}],email:[{validator:e,message:"邮箱格式错误",trigger:"blur"}]}}},watch:{dialogFormVisible:function(){this.resetTemp()},temp:{handler:function(e,t){},immediate:!0,deep:!0}},created:function(){this.getRoles()},destroyed:function(){},methods:{handelFile:function(e){var t=this;console.log(e),t.temp.img=e.url.data},getRoles:function(){var e=this;Object(r["f"])().then((function(t){e.roles=t.data}))},resetTemp:function(){this.temp={id:0,groupId:"",userName:"",password:"",realName:"",isEnabled:1,phone:"",email:"",regTime:Object(d["d"])(),img:""}},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.currentIndex=-1,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},handleUpdate:function(e){var t=this;this.oss_url=u["a"].oss_url,this.dialogStatus="update",this.dialogFormVisible=!0;var n=this;Object(o["f"])(e).then((function(e){1===e.status&&(n.temp.id=e.data.id,n.temp.groupId=e.data.groupId,n.temp.userName=e.data.userName,n.temp.realName=e.data.realName,n.temp.isEnabled=e.data.isEnabled,n.temp.phone=e.data.phone,n.temp.email=e.data.email,n.temp.password="",n.temp.img=e.data.img)})),this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},saveData:function(){var e=this;this.btnLoading=!0,console.log("更新"),this.$refs["dataForm"].validate((function(t){if(t){var n=e,i=e.temp;"object"===Object(l["a"])(i.img)&&(i.img=i.img.join(",")),Object(o["h"])(i).then((function(t){1===t.status?(i.id||(i.id=t.data.id),e.$emit("updateRow",i),n.dialogFormVisible=!1,n.$message.success(t.msg)):n.$message.error(t.msg),n.btnLoading=!1})).catch((function(t){e.btnLoading=!1}))}else e.btnLoading=!1}))}}},f=m,p=n("2877"),h=Object(p["a"])(f,i,a,!1,null,null,null);t["default"]=h.exports}}]);