(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ee3d6da"],{2519:function(e,t,n){"use strict";var s=n("7a85"),i=n.n(s);i.a},6724:function(e,t,n){"use strict";n("8d41");var s="@@wavesContext";function i(e,t){function n(n){var s=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var a=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(a.width,a.height)+"px",l.appendChild(o)),i.type){case"center":o.style.top=a.height/2-o.offsetHeight/2+"px",o.style.left=a.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(n.pageY-a.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(n.pageX-a.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=i.color,o.className="waves-ripple z-active",!1}}return e[s]?e[s].removeHandle=n:e[s]={removeHandle:n},n}var l={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[s].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[s].removeHandle,!1),e[s]=null,delete e[s]}},a=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(a)),l.install=a;t["a"]=l},7732:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e.showSearch?n("div",{staticClass:"filter-container"},[n("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.listQuery}},[n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"名称",clearable:"",size:"small"},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{placeholder:"状态",clearable:"",size:"small"},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},[n("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),n("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{placeholder:"商品所属类型",clearable:"",size:"small"},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[n("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),n("el-option",{attrs:{label:"平台",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"商家",value:"2"}})],1)],1),e._v(" "),n("el-form-item",[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleFilter}},[e._v("搜索")])],1),e._v(" "),n("el-form-item",[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"warning",icon:"el-icon-refresh",size:"small"},on:{click:e.handleFilterClear}},[e._v("重置\n        ")])],1)],1)],1):e._e(),e._v(" "),n("el-row",{staticStyle:{"margin-bottom":"10px"}},[n("el-col",{attrs:{xs:24,sm:24,lg:24}},[n("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"warning",icon:"el-icon-refresh",circle:""},on:{click:e.handleFilterClear}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"添加",placement:"top"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:e.handleCreate}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"搜索",placement:"top"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",circle:""},on:{click:function(t){e.showSearch=!e.showSearch}}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"top"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:e.deleting,disabled:e.buttonDisabled,type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.handleDeleteAll()}}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"更多",placement:"top"}},[n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click",placement:"bottom"},on:{command:e.handleCommand}},[n("el-button",{attrs:{disabled:e.buttonDisabled,type:"Info",circle:""}},[n("i",{staticClass:"el-icon-more"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"1"}},[e._v("设为上架")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"2"}},[e._v("设为下架")])],1)],1)],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"ID",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"商品名称",align:"center","min-width":"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"封面图",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticClass:"headimgurl",attrs:{src:e.row.images_url}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"库存",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.inventory)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"成本价",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cost_price)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"市场价",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.line_price)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"销售价",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.price)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"销量",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.sales)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"设为爆款",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"el-icon-success text-green":1==t.row.faddish,"el-icon-error text-red":2==t.row.faddish},on:{click:function(n){return e.handleModifyFaddish(t.$index,t.row.id,t.row.faddish)}}},[e._v("\n          "+e._s(e._f("statusFilter")(t.row.faddish)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否允许自提",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"el-icon-success text-green":1==t.row.is_store,"el-icon-error text-red":2==t.row.is_store},on:{click:function(n){return e.handleModifyis_store(t.$index,t.row.id,t.row.is_store)}}},[e._v("\n          "+e._s(e._f("statusFilter")(t.row.is_store)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"el-icon-success text-green":1==t.row.status,"el-icon-error text-red":2==t.row.status},on:{click:function(n){return e.handleModifyStatus(t.$index,t.row.id,t.row.status)}}},[e._v("\n          "+e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否轮播推荐",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"el-icon-success text-green":1==t.row.is_banner,"el-icon-error text-red":2==t.row.is_banner},on:{click:function(n){return e.handleModifyBannder(t.$index,t.row.id,t.row.is_banner)}}},[e._v("\n          "+e._s(e._f("statusFilter")(t.row.is_banner)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"120px","class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[n("router-link",{attrs:{to:"/goods/edit/"+t.row.id}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"text",size:"mini"}},[e._v(" 编辑\n            ")])],1)],1),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:t.row.delete,type:"text",size:"mini"},on:{click:function(n){return e.handleDelete(t.$index,t.row.id)}}},[e._v(" 删除\n        ")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.psize,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],l=(n("ac6a"),n("c40e")),a=n("6724"),o=n("ed08"),r={name:"Roles",components:{},directives:{waves:a["a"]},filters:{statusFilter:function(e){var t={2:"下架",1:"上架"};return t[e]}},data:function(){return{tableKey:0,list:null,total:null,selectedRows:null,listLoading:!0,showSearch:!1,listQuery:{page:1,limit:10,title:""},buttonDisabled:!0,deleting:!1,pickerOptions:o["h"],currentIndex:-1}},watch:{},created:function(){this.fetchList()},methods:{fetchList:function(){var e=this;this.listLoading=!0,Object(l["a"])(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.fetchList()},handleFilterClear:function(){this.listQuery={page:1,limit:10,title:""},this.fetchList()},handleSizeChange:function(e){this.listQuery.psize=e,this.fetchList()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchList()},handleModifyStatus:function(e,t,n){this.list[e]["status"]=2===n?1:2,Object(l["d"])(t,"status",this.list[e]["status"]).then((function(e){}))},handleModifyBannder:function(e,t,n){this.list[e]["is_banner"]=2===n?1:2,Object(l["d"])(t,"is_banner",this.list[e]["is_banner"]).then((function(e){}))},handleModifyis_store:function(e,t,n){this.list[e]["is_store"]=2===n?1:2,Object(l["d"])(t,"is_store",this.list[e]["is_store"]).then((function(e){}))},handleModifyFaddish:function(e,t,n){this.list[e]["faddish"]=2===n?1:2,Object(l["d"])(t,"faddish",this.list[e]["faddish"]).then((function(e){}))},handleSelectionChange:function(e){e.length>0?this.buttonDisabled=!1:this.buttonDisabled=!0,this.selectedRows=e},handleCreate:function(){this.$refs.fromRoles.handleCreate()},handleUpdate:function(e,t){this.currentIndex=e,this.$refs.fromRoles.handleUpdate(t)},updateRow:function(e){this.currentIndex>=0&&e.id>0?this.list.splice(this.currentIndex,1,e):(this.list.length>=10&&this.list.pop(),this.list.push(e),this.total=this.total+1),this.currentIndex=-1},handleDelete:function(e,t){var n=this,s=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s.$set(s.list[e],"delete",!0),Object(l["f"])(t).then((function(t){1===t.status?(s.list.splice(e,1),s.total=s.total-1,s.$notify.success(t.msg)):s.$notify.error(t.msg),s.$set(s.list[e],"delete",!1)})).catch((function(t){s.$set(s.list[e],"delete",!1)}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleDeleteAll:function(){var e=this,t=this;this.selectedRows.length>0?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleting=!0;var e=Object(o["c"])(t.selectedRows,"id"),n=e.join(",");Object(l["g"])({ids:n}).then((function(n){if(1===n.status){var s=[];t.list.forEach((function(t,n,i){e.indexOf(t.id)>-1&&s.push(n)}));for(var i=s.length-1;i>=0;i--)t.list.splice(s[i],1);t.total=t.total-s.length,t.$message.success(n.msg)}else t.$message.error(n.msg);t.deleting=!1})).catch((function(e){t.deleting=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):t.$message.error("请选择要删除的数据")},handleCommand:function(e){var t=this;if(this.selectedRows.length>0){var n=Object(o["c"])(this.selectedRows,"id"),s=n.join(",");Object(l["e"])({val:s,field:"status",value:e}).then((function(s){1===s.status?(t.list.forEach((function(s,i,l){n.indexOf(s.id)>-1&&(t.list[i]["status"]=e)})),t.$message.success(s.msg)):t.$message.error(s.msg)})).catch((function(e){}))}else t.$message.error("请选择要操作的数据")},handleBanner:function(e){var t=this;if(this.selectedRows.length>0){var n=Object(o["c"])(this.selectedRows,"id"),s=n.join(",");Object(l["e"])({val:s,field:"is_banner",value:e}).then((function(s){1===s.status?(t.list.forEach((function(s,i,l){n.indexOf(s.id)>-1&&(t.list[i]["is_banner"]=e)})),t.$message.success(s.msg)):t.$message.error(s.msg)})).catch((function(e){}))}else t.$message.error("请选择要操作的数据")}}},c=r,d=(n("2519"),n("2877")),u=Object(d["a"])(c,s,i,!1,null,null,null);t["default"]=u.exports},"7a85":function(e,t,n){},"8d41":function(e,t,n){},c40e:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return d}));var s=n("b775");function i(e){return Object(s["a"])({url:"api/admin/goods/GetDataByList",method:"get",params:e})}function l(e){return Object(s["a"])({url:"api/admin/goods/GetIdByDetails",method:"get",params:{id:e}})}function a(e){return Object(s["a"])({url:"api/admin/goods/PostDataBySave",method:"post",data:e})}function o(e,t,n){var i={val:e,field:t,value:n};return Object(s["a"])({url:"/admin/goods/change",method:"post",data:i})}function r(e){return Object(s["a"])({url:"/admin/goods/changeall",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/admin/goods/delall",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/admin/goods/del",method:"get",params:{id:e}})}}}]);