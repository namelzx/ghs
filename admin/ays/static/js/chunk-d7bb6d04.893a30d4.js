(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7bb6d04","chunk-0f5c78e2"],{"1dc6":function(t,e,o){},2038:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"divider"},[o("div",{staticClass:"b"},[t._v("  ")]),t._v(" "),o("div",{staticClass:"title"},[t._v(t._s(t.title))])])},a=[],n={name:"Divider",props:{title:String}},i=n,s=(o("3d60"),o("2877")),l=Object(s["a"])(i,r,a,!1,null,"4ac9f35c",null);e["default"]=l.exports},2423:function(t,e,o){"use strict";o.d(e,"f",(function(){return a})),o.d(e,"g",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"i",(function(){return s}));var r=o("b775");function a(t){return Object(r["a"])({url:"/article/list",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/article/pv",method:"get",params:{pv:t}})}function i(t){return Object(r["a"])({url:"/article/create",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/article/update",method:"post",data:t})}},2934:function(t,e){},"3d60":function(t,e,o){"use strict";var r=o("4b262"),a=o.n(r);a.a},"4b262":function(t,e,o){},"4efa":function(t,e,o){"use strict";var r=o("1dc6"),a=o.n(r);a.a},7998:function(t,e,o){"use strict";o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n})),o.d(e,"d",(function(){return i})),o.d(e,"e",(function(){return s})),o.d(e,"b",(function(){return l}));var r=o("b775");function a(t){return Object(r["a"])({url:"admin/Community/GetDataByList",method:"get",params:t})}function n(){return Object(r["a"])({url:"admin/city/GetCity",method:"get"})}function i(t){return Object(r["a"])({url:"admin/Community/GetIdByDel",method:"get",params:{id:t}})}function s(t){return Object(r["a"])({url:"admin/Community/PostDataBySave",method:"post",data:t})}function l(){return Object(r["a"])({url:"admin/Community/GetCommunityByall",method:"get"})}},"828d":function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var r=o("b775");function a(t){return Object(r["a"])({url:"/search/user",method:"get",params:{name:t}})}},"88e7":function(t,e,o){"use strict";o("7f7f"),o("3b2b"),o("a481");var r={dateFormat:function(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var r in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length)));return e}},a=o("9b15");e["a"]={randomString:function(t){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o="",r=0;r<t;r++){var a=Math.ceil(35*Math.random());o+=e[a]}return o},createOssClient:function(){return new Promise((function(t,e){var o=new a({region:"oss-cn-beijing",accessKeyId:"LTAI4G7m7lF5SkXU",accessKeySecret:"PbcsuZTY2CMVPjr1K2DGzMejeotVTI",bucket:"kedand"});t(o)}))},ossUploadFile:function(t){var e=t.file,o=this;return new Promise((function(a,n){var i=r.dateFormat(new Date,"yyyyMMdd"),s=r.dateFormat(new Date,"yyyyMMddhhmmss"),l=o.randomString(4),c=e.name.substr(e.name.indexOf(".")),m="video/"+i+"/"+s+"_"+l+c;o.createOssClient().then((function(o){o.multipartUpload(m,e,{progress:function(e){var o={};o.percent=Math.floor(100*e),t.onProgress(o)}}).then((function(o){if(a({name:e.name,url:o.name}),200===o.res.statusCode)return t.onSuccess(o),o;t.onError("上传失败")}),(function(e){t.onError("上传失败"),n(e)}))}))}))}}},bab3:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"createPost-container"},[o("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm}},[o("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+t.postForm.status}},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("\n        保存\n      ")])],1),t._v(" "),o("div",{staticClass:"createPost-main-container"},[o("div",{staticClass:"main-bg"},[o("divider",{attrs:{title:"基本信息"}}),t._v(" "),o("div",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"商品名称:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入商品名称"},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"销售价:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入销售价"},model:{value:t.postForm.price,callback:function(e){t.$set(t.postForm,"price",e)},expression:"postForm.price"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"团长佣金:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入团长佣金(默认0)"},model:{value:t.postForm.head_price,callback:function(e){t.$set(t.postForm,"head_price",e)},expression:"postForm.head_price"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"产品经理佣金:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"输入业务经理佣金(默认0)"},model:{value:t.postForm.manager_price,callback:function(e){t.$set(t.postForm,"manager_price",e)},expression:"postForm.manager_price"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"销量:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"输入销量(默认0)"},model:{value:t.postForm.sales,callback:function(e){t.$set(t.postForm,"sales",e)},expression:"postForm.sales"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"成本价:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入成本价 (默认0)"},model:{value:t.postForm.cost_price,callback:function(e){t.$set(t.postForm,"cost_price",e)},expression:"postForm.cost_price"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"市场价:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入市场价(默认0)"},model:{value:t.postForm.line_price,callback:function(e){t.$set(t.postForm,"line_price",e)},expression:"postForm.line_price"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"100px",label:"库存:"}},[o("el-input",{attrs:{size:"mini",rows:1,autosize:"",placeholder:"请输入市场价 (默认0,低于1将会下架)"},model:{value:t.postForm.inventory,callback:function(e){t.$set(t.postForm,"inventory",e)},expression:"postForm.inventory"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"所属分类:"}},[o("el-select",{attrs:{size:"mini",prod:"category_id",placeholder:"选择所属分类"},model:{value:t.postForm.category_id,callback:function(e){t.$set(t.postForm,"category_id",e)},expression:"postForm.category_id"}},t._l(t.category,(function(t,e){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"选择所属小区:"}},[o("el-select",{attrs:{size:"mini",prod:"category_id",placeholder:"选择所属小区"},model:{value:t.postForm.community_id,callback:function(e){t.$set(t.postForm,"community_id",e)},expression:"postForm.community_id"}},t._l(t.community,(function(t,e){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"选择所属经理:"}},[o("el-select",{attrs:{size:"mini",prod:"category_id",placeholder:"选择所属经理"},model:{value:t.postForm.product_id,callback:function(e){t.$set(t.postForm,"product_id",e)},expression:"postForm.product_id"}},t._l(t.product,(function(t,e){return o("el-option",{key:t.id,attrs:{label:t.nickName,value:t.id}})})),1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{"label-width":"100px",label:"商品特色:"}},[o("el-input",{staticClass:"article-textarea",attrs:{size:"mini",rows:1,type:"textarea",autosize:"",placeholder:"输入商品特色"},model:{value:t.postForm.sellpoint,callback:function(e){t.$set(t.postForm,"sellpoint",e)},expression:"postForm.sellpoint"}})],1)],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"main-bg"},[o("divider",{attrs:{title:"商品素材"}}),t._v(" "),o("div",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"商品图片:"}},[o("CoverImage",{attrs:{"image-url":t.postForm.images_url},on:{showParentComp:t.HandelImages}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"爆款推荐图:"}},[o("CoverImage",{attrs:{"image-url":t.postForm.hot_img},on:{showParentComp:t.HandelHont}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{"label-width":"100px",label:"主图视频:"}},[o("uploadVideo",{attrs:{imageUrl:t.postForm.videosrc},on:{handelFile:t.handelFile}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:24}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{"label-width":"100px",label:"单品图片列表:"}},[o("ListImage",{attrs:{list:t.postForm.img_list},on:{handelRemove:t.handelRemove,handelFile:t.handelImglist}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{"label-width":"100px",label:"商品轮播图"}},[o("ListImage",{attrs:{list:t.postForm.img_banner},on:{handelRemove:t.handelbannerRemove,handelFile:t.handelbanner}})],1)],1)],1)],1)],1)])],1)],1)},a=[],n=(o("7f7f"),o("28a5"),o("8256")),i=o("abaf"),s=o("9fd7"),l=o("5b4d"),c=o("4125"),m=o("b804"),u=(o("61f7"),o("2423"),o("828d")),d=o("2038"),p=o("c40e"),f=o("7998"),h=o("c405"),g=(o("2934"),{name:"ArticleDetail",components:{uploadVideo:s["a"],Divider:d["default"],Tinymce:n["a"],Upload:i["a"],Sticky:m["a"],CoverImage:l["a"],ListImage:c["a"],SukImages:i["a"]},props:{isEdit:{type:Boolean,default:!1}},filters:{statusFilter:function(t){var e={1:"",2:"info"};return e[t]}},data:function(){return{product:[],videosrc:"",ruleall:[],photoVisible:!1,banner:[],category:[],postForm:{},loading:!1,userListOptions:[],brand:[],img_list:[],tempRoute:{},photo:[],community:[]}},computed:{displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}},created:function(){var t=this;if(Object(f["b"])().then((function(e){t.community=e.data})),this.postForm.img_list=[],this.postForm.img_banner=[],this.postForm=Object.assign({},this.postForm),this.isEdit){var e=this.$route.params&&this.$route.params.id;this.fetchData(e)}console.log(this.postForm),Object(h["a"])().then((function(e){t.category=e.data})),this.tempRoute=Object.assign({},this.$route)},methods:{handelbannerRemove:function(t){this.postForm.img_banner=t},handelbanner:function(t){null==this.postForm.img_banner&&(this.postForm.img_banner=[]),this.postForm.img_banner.push({url:t})},handelRemove:function(t){this.postForm.img_list=t},handelImglist:function(t){this.postForm.img_list.push({url:t})},handelFile:function(t){this.postForm.videosrc=t,this.postForm=Object.assign({},this.postForm)},HandelImages:function(t){this.postForm.images_url=t,this.postForm=Object.assign({},this.postForm)},HandelHont:function(t){this.postForm.hot_img=t,this.postForm=Object.assign({},this.postForm)},Handelhome:function(t){this.postForm.home_img=t,this.postForm=Object.assign({},this.postForm)},fetchData:function(t){var e=this;Object(p["c"])(t).then((function(t){if(e.postForm=t.data,e.product=t.product,null===e.postForm.img_list)e.postForm.img_list=[];else{var o=e.postForm.img_list.split(",");e.postForm.img_list=[];for(var r=0;r<o.length;r++)e.postForm.img_list.push({url:o[r]});var a=e.postForm.img_banner.split(",");e.postForm.img_banner=[];for(var n=0;n<a.length;n++)e.postForm.img_banner.push({url:a[n]})}e.setTagsViewTitle(),e.setPageTitle()})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){var t="Edit Article";Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.postForm.id)})},setPageTitle:function(){var t="编辑商品";document.title="".concat(t," - ").concat(this.postForm.id)},submitForm:function(){var t=this;this.$refs.postForm.validate((function(e){if(!e)return!1;for(var o=t.postForm,r=t.postForm.img_list,a=[],n=0;n<r.length;n++)a.push(r[n].url);var i=t.postForm.img_banner;if(console.log(i),null!=i){for(var s=[],l=0;l<i.length;l++)s.push(i[l].url);t.postForm.img_banner=s.join(",")}t.postForm.img_list=a.join(","),Object(p["d"])(o).then((function(e){t.$notify({title:"成功",message:e.msg,type:"success",duration:2e3})})),t.loading=!1}))},draftForm:function(){0!==this.postForm.content.length&&0!==this.postForm.title.length?this.$message({message:"保存成功",type:"success",showClose:!0,duration:1e3}):this.$message({message:"请填写必要的标题和内容",type:"warning"})},getRemoteUserList:function(t){var e=this;Object(u["a"])(t).then((function(t){t.data.items&&(e.userListOptions=t.data.items.map((function(t){return t.name})))}))}}}),b=g,v=(o("4efa"),o("2877")),F=Object(v["a"])(b,r,a,!1,null,"7f92ca86",null);e["default"]=F.exports},c405:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"d",(function(){return s}));var r=o("b775");function a(t){return Object(r["a"])({url:"api/admin/category/GetDataByList",method:"get",params:t})}function n(){return Object(r["a"])({url:"api/admin/category/GetCategory",method:"get"})}function i(t){return Object(r["a"])({url:"api/admin/category/GetIdByDel",method:"get",params:{id:t}})}function s(t){return Object(r["a"])({url:"api/admin/category/PostDataBySave",method:"post",data:t})}},c40e:function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"d",(function(){return i})),o.d(e,"f",(function(){return s})),o.d(e,"g",(function(){return l})),o.d(e,"j",(function(){return c})),o.d(e,"i",(function(){return m}));var r=o("b775");function a(t){return Object(r["a"])({url:"api/admin/goods/GetDataByList",method:"get",params:t})}function n(t){return Object(r["a"])({url:"api/admin/goods/GetIdByDetails",method:"get",params:{id:t}})}function i(t){return Object(r["a"])({url:"api/admin/goods/PostDataBySave",method:"post",data:t})}function s(t,e,o){var a={val:t,field:e,value:o};return Object(r["a"])({url:"/admin/goods/change",method:"post",data:a})}function l(t){return Object(r["a"])({url:"/admin/goods/changeall",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/admin/goods/delall",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/admin/goods/del",method:"get",params:{id:t}})}}}]);