(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70da55e5"],{"277e":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return r})),i.d(e,"g",(function(){return s})),i.d(e,"h",(function(){return l})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return u})),i.d(e,"d",(function(){return c})),i.d(e,"b",(function(){return d}));var n=i("b775");function a(t){return Object(n["a"])({url:"admin/Permissions/index",method:"post",data:t})}function r(){return Object(n["a"])({url:"/admin/Permissions/getLists",method:"post"})}function s(t){return Object(n["a"])({url:"/admin/Permissions/getinfo",method:"get",params:{id:t}})}function l(t){return Object(n["a"])({url:"/admin/Permissions/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/Permissions/del",method:"get",params:{id:t}})}function u(t,e,i){var a={val:t,field:e,value:i};return Object(n["a"])({url:"/admin/Permissions/change",method:"post",data:a})}function c(t){return Object(n["a"])({url:"/admin/Permissions/delall",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/admin/Permissions/changeall",method:"post",data:t})}},"77c7":function(t,e,i){"use strict";var n=i("8ec6"),a=i.n(n);a.a},8433:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{width:"60%",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"100%",height:"50vh","overflow-y":"scroll"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"岗位名称",prop:"title"}},[i("el-input",{attrs:{clearable:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"md"},[i("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.getPremiss,(function(e,n){return i("el-collapse-item",{attrs:{name:e.name}},[i("span",{staticClass:"collapse-title",attrs:{slot:"title"},slot:"title"},[e.title?i("el-checkbox",{attrs:{label:e.id}},[t._v(t._s(e.title))]):t._e()],1),t._v(" "),t._l(e.children,(function(e,n){return i("div",{staticClass:"ch-2"},[e.title?i("el-checkbox",{attrs:{label:e.id}},[t._v(t._s(e.title))]):t._e(),t._v(" "),e.roles?i("el-checkbox-group",{model:{value:t.rolesList,callback:function(e){t.rolesList=e},expression:"rolesList"}},t._l(e.roles,(function(n,a){return e.roles?i("div",{staticClass:"o-2-or"},[i("div",{staticClass:"or-title"},[i("el-checkbox",[t._v("\n                      "+t._s(n.title)+"\n                    ")])],1),t._v(" "),i("div",{staticClass:"or-child-item"},t._l(n.children,(function(e,n){return i("div",{staticClass:"or-child"},[i("el-checkbox",{attrs:{label:e.id}},[t._v(" "+t._s(e.title))])],1)})),0)]):t._e()})),0):t._e(),t._v(" "),t._l(e.children,(function(n,a){return e.children?i("div",[i("el-checkbox",{attrs:{label:n.id}},[t._v(t._s(n.title))])],1):t._e()}))],2)}))],2)})),1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){return t.saveData()}}},[t._v("保存")])],1)],1)},a=[],r=(i("28a5"),i("bd43")),s=i("277e"),l=i("f382"),o={name:"RolesForm",data:function(){return{loading:!0,checkList:[],rolesList:[],activeNames:void 0,btnLoading:!1,ruleList:[],checked:!0,temp:{id:0,title:"",status:1,rules:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{title:[{required:!0,message:"名称必填",trigger:"blur"}]},defaultChecked:[],defaultProps:{children:"children",label:"title"}}},computed:{getRulesList:function(){return l["a"].listToTreeMulti(this.ruleList)},getPremiss:function(){for(var t=l["a"].listToTreeMulti(this.ruleList),e=0;e<t.length;e++);return t}},watch:{dialogFormVisible:function(){this.resetTemp()}},created:function(){this.getRules()},destroyed:function(){},methods:{getRules:function(){var t=this;Object(r["f"])().then((function(e){t.ruleList=e.data}))},resetTemp:function(){this.temp={id:0,title:"",status:1,rules:""}},checkHandle:function(t){var e=this.$refs.tree.getHalfCheckedKeys().join(","),i=this.$refs.tree.getCheckedKeys().join(",");e.length&&i.length?this.temp.rules=e+","+i:e.length&&0===i.length?this.temp.rules=e:0===e.length&&i.length?this.temp.rules=i:this.temp.rules=""},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.currentIndex=-1,this.loading=!1,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleUpdate:function(t){var e=this;this.loading=!0,this.dialogStatus="update",this.dialogFormVisible=!0;var i=this;Object(s["g"])(t).then((function(t){if(1===t.status){if(i.checkList=[],i.rolesList=[],i.temp.id=t.data.id,i.temp.title=t.data.title,i.temp.status=t.data.status,i.temp.rules=t.data.rules,null!==t.data.rules){for(var n=t.data.rules.split(","),a=[],r=0;r<n.length;r++)a[r]=parseInt(n[r]);i.checkList=a}if(null!==t.data.btn){for(var s=t.data.btn.split(","),l=[],o=0;o<s.length;o++)l[o]=s[o];i.rolesList=l}e.loading=!1}})),this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},saveData:function(){var t=this;this.btnLoading=!0,this.$refs["dataForm"].validate((function(e){if(e){var i=t,n=t.temp;t.temp.rules=t.checkList.join(","),t.temp.btn=t.rolesList.join(","),Object(s["h"])(n).then((function(e){1===e.status?(n.id||(n.id=e.data.id),t.$emit("updateRow",n),i.dialogFormVisible=!1,i.$message.success(e.msg)):i.$message.error(e.msg),i.btnLoading=!1})).catch((function(e){t.btnLoading=!1}))}else t.btnLoading=!1}))}}},u=o,c=(i("77c7"),i("2877")),d=Object(c["a"])(u,n,a,!1,null,"4aa144fb",null);e["default"]=d.exports},"8ec6":function(t,e,i){},bd43:function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return r})),i.d(e,"g",(function(){return s})),i.d(e,"h",(function(){return l})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return u})),i.d(e,"d",(function(){return c})),i.d(e,"b",(function(){return d}));var n=i("b775");function a(t){return Object(n["a"])({url:"/admin/rules/index",method:"post",data:t})}function r(){return Object(n["a"])({url:"/admin/rules/getLists",method:"post"})}function s(t){return Object(n["a"])({url:"/admin/rules/getinfo",method:"get",params:{id:t}})}function l(t){return Object(n["a"])({url:"/admin/rules/save",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/rules/del",method:"get",params:{id:t}})}function u(t,e,i){var a={val:t,field:e,value:i};return Object(n["a"])({url:"/admin/rules/change",method:"post",data:a})}function c(t){return Object(n["a"])({url:"/admin/rules/delall",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/admin/rules/changeall",method:"post",data:t})}},f382:function(t,e,i){"use strict";i("ac6a");var n=i("ed08");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=[];return t&&t.forEach((function(u){if(u[r]===e){null!==l&&(u=Object(n["e"])(u,l));var c=a(t,u[i],i,r,s,l);c.length&&(u[s]=c),o.push(u)}})),o}function r(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",a=[];return t&&t.forEach((function(s){if(s[i]===e){a.unshift(s[n]);var l=r(t,s[n],i,n);l.length&&(a=a.concat(l))}})),a}function s(t,e,i,a){return t&&t.map((function(t){t[e]===i?Object(n["e"])(t,a):s(t.children,e,i,a)})),t}var l={listToTreeMulti:a,getParentsId:r,upadteArr:s};e["a"]=l}}]);